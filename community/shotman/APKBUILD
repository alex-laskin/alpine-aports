maintainer="Hugo Osvaldo Barrera <hugo@whynothugo.nl>"
pkgname=shotman
pkgver=0.4.10
pkgrel=0
pkgdesc="Uncompromising screenshot GUI for Wayland"
url="https://git.sr.ht/~whynothugo/shotman"
arch="all"
license="ISC"
depends="slurp"
makedepends="cargo libxkbcommon-dev scdoc cargo-auditable"
subpackages="
	$pkgname-doc
	$pkgname-bash-completion
	$pkgname-fish-completion
	$pkgname-zsh-completion
	"
source="shotman-$pkgver.tar.gz::https://git.sr.ht/~whynothugo/shotman/archive/v$pkgver.tar.gz"
builddir="$srcdir/$pkgname-v$pkgver"
options="net" # fetch dependencies

prepare() {
	default_prepare

	cargo fetch --target="$CTARGET" --locked
}

build() {
	export SHOTMAN_VERSION=$pkgver
	make build
}

check() {
	cargo test --frozen
}

package() {
	DESTDIR="$pkgdir" PREFIX="/usr" make install --trace
}

sha512sums="
8bebba0c0b76db4a3bb9b3a906c345d261053babc26c2ed702081ea36cc4500eb61d30f223f12db13a4382c0ee647b0c9cbe96d6d3368cc77b2a6d7912d3f0bd  shotman-0.4.10.tar.gz
"
