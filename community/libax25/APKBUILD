# Contributor: Milan P. Stanić <mps@arvanta.net>
# Maintainer: Milan P. Stanić <mps@arvanta.net>
pkgname=libax25
pkgver=1.2.2
pkgrel=0
pkgdesc="set of functions making it easier to write hamradio programs"
url="https://github.com/ve7fet/linuxax25"
arch="all"
license="LGPL-2.1-or-later"
makedepends="autoconf automake zlib-dev libtool"
subpackages="$pkgname-static $pkgname-dev $pkgname-doc"
source="https://github.com/ve7fet/linuxax25/archive/refs/tags/libax25-$pkgver.tar.gz
	"
builddir="$srcdir"/linuxax25-$pkgname-$pkgver/libax25

prepare() {
	default_prepare
	./autogen.sh
}

build() {
	export CBUILD=$CHOST
	export LDFLAGS="$LDFLAGS -lz"

	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--enable-shared \
		--enable-static \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
c70c285662ac5609f71ba639b721c0fa65abf44c92d20257929a2017913a2a3a3a0e351ed6b34f5dd52b4242dd335d9875014cec4bb61950e5f48ce4410cc01e  libax25-1.2.2.tar.gz
"
