# Contributor: ScrumpyJack <scrumpyjack@st.ilet.to>
# Maintainer: ScrumpyJack <scrumpyjack@st.ilet.to>
pkgname=frotz
pkgver=2.55
pkgrel=0
pkgdesc="Portable Z-Machine Interpreter"
url="https://davidgriffith.gitlab.io/frotz/"
arch="all"
license="GPL-2.0-or-later"
makedepends="libao-dev libmodplug-dev libsamplerate-dev libsndfile-dev
	ncurses-dev"
subpackages="$pkgname-doc"
source="
	https://gitlab.com/DavidGriffith/frotz/-/archive/$pkgver/frotz-$pkgver.tar.gz
	gcc-15.patch
	"

prepare() {
	default_prepare
	# use our cflags
	sed -i 's/^CFLAGS +=/CFLAGS ?=/g' Makefile
}

build() {
	make
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

sha512sums="
08ba5d31ab81548d45f264a2661144eeccb3440ca47aab07c6b26fb042ca65cecd9642e9c899abdba162da591c5d3afff2d61e8e8005b53e34ac202909089d12  frotz-2.55.tar.gz
0a94860422e1f817ac3f21fc2bc4ff069e85766243e7cc85b14458249f0d6e98cb039812115bacfec633ebd28cdc5a4e302e7dcfe7b711ff89bb19d93d88a5f7  gcc-15.patch
"
