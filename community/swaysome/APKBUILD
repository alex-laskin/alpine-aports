# Maintainer: Cowington Post <cowingtonpost@gmail.com>
pkgname=swaysome
pkgver=2.3.2
pkgrel=0
pkgdesc="Helps you configure sway to work a bit more like AwesomeWM"
url="https://gitlab.com/hyask/swaysome"
arch="all"
license="MIT"
depends="sway"
makedepends="cargo cargo-auditable"
subpackages="$pkgname-doc"
source="https://gitlab.com/hyask/swaysome/-/archive/$pkgver/swaysome-$pkgver.tar.gz"
options="net !check" # tests broken on latest version

prepare() {
	default_prepare

	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

check() {
	cargo test --frozen
}

package() {
	install -Dm755 target/release/"$pkgname" -t "$pkgdir"/usr/bin

	install -D -m644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
4b3cbf55aac9db875855233c868f588459b0b7c7785aabfa44c1a907ff9e5957cae04735556d645dfde2bcb8c7e82700761c4684fe4858b99d28909414c3ffca  swaysome-2.3.2.tar.gz
"
