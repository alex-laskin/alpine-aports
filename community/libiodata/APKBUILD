# Contributor: Bart Ribbers <bribbers@disroot.org>
# Maintainer: Bart Ribbers <bribbers@disroot.org>
pkgname=libiodata
pkgver=0.19.14
pkgrel=0
pkgdesc="Library for reading and writing simple structured data"
url="https://github.com/sailfishos/libiodata"
arch="all"
license="LGPL-2.1-only"
makedepends="
	argp-standalone
	bison
	flex
	qt6-qtbase-dev
	"
subpackages="$pkgname-dev"
source="https://github.com/sailfishos/libiodata/archive/${pkgver/_/+}/libiodata-${pkgver/_/+}.tar.gz
	prf.patch
	"
builddir="$srcdir/$pkgname-${pkgver/_/-}"
options="!check"

export IODATA_VERSION="$pkgver"

build() {
	qmake6
	make -j1 # Multi-threaded builds are broken
}

package() {
	INSTALL_ROOT="$pkgdir" make install
}

sha512sums="
204a517f27e85f15764e36a9ba773c434711ea6ab2d1c6b68389cb2b29cfdfb8fefe3bc6d53e7f7d604720ce2e3230779ae09d60dd31f8641c5da978b8af4c51  libiodata-0.19.14.tar.gz
2f7fd4a7ad5f5e095e19891db75e3eebd7952b51bd31d3d7a85606b3f6284fce7c63bb893e238d27961959cef7208d50f80f82d673bb9a07e227e7b9b92d0f5e  prf.patch
"
