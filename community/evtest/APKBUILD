# Contributor: Timo Teräs <timo.teras@iki.fi>
# Maintainer: Timo Teräs <timo.teras@iki.fi>
pkgname=evtest
pkgver=1.36
pkgrel=0
pkgdesc="monitor input layer events"
options="!check" # No testsuite
url="https://cgit.freedesktop.org/evtest/"
arch="all"
license="GPL-2.0"
makedepends="linux-headers autoconf automake libtool"
source="https://gitlab.freedesktop.org/libevdev/evtest/-/archive/evtest-$pkgver/evtest-evtest-$pkgver.tar.gz
	fix-ppc64le-musl.patch
	"
builddir="$srcdir"/evtest-evtest-$pkgver

prepare() {
	default_prepare
	autoreconf -fi
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr
	make
}

package() {
	make install DESTDIR="$pkgdir"
}

sha512sums="
da48df0045c4714ef09e80210de2df1e4dac5281b9c390a78b2fb94626855c0d8df1f31f5d129c5f3cef98b6f5ddfe020de7602119e6603e568bd02cc80c5546  evtest-evtest-1.36.tar.gz
d7df35a135dcd83a4631e121c355c445644862608728128948ecf2c3cea7ff99d1e858b89f827f376c25cf59a644fee7f60378816bc8503314b8a9fd4c88c4e3  fix-ppc64le-musl.patch
"
