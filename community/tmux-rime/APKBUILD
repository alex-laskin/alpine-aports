# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=tmux-rime
pkgver=0.0.5
pkgrel=0
pkgdesc="Use Rime input method with tmux"
url="https://github.com/rimeinn/tmux-rime"
arch="all"
license="GPL-3.0-only"
depends="tmux"
makedepends="
	7zip
	git
	glib-dev
	librime-dev
	xmake
	"
subpackages="$pkgname-dev"
source="https://github.com/rimeinn/tmux-rime/archive/refs/tags/$pkgver/tmux-rime-$pkgver.tar.gz
	glib-2.0.patch
	"
options="!check" # no tests provided

export XMAKE_GLOBALDIR="${XMAKE_GLOBALDIR:-"$tmpdir"}"

build() {
	xmake global --network=private
	xmake config --verbose \
		--cc="$CC" --cflags="$CFLAGS" \
		--cxx="$CXX" --cxxflags="$CXXFLAGS" \
		--ld="$CC" --ldflags="$LDFLAGS"
	xmake build --verbose
}

package() {
	xmake install --root --installdir="$pkgdir"/usr
}

sha512sums="
ad571f9e057a7e8f6075c1aa18febfe176848af1adf6b7afa6edb4854b4482876b8898a7fc499cc54bc1f911cb3d549ef95240aaa653ed20cafe5150edcd47db  tmux-rime-0.0.5.tar.gz
8590ceaf0e0b45aa2e77fd4fed7ef84dc4f3bcffb7f1c58fdef944a481cea160ad932cf4ce862d34b69dc15c8e6344d80244b878cec1ac1d80c1ac4c5a5861e7  glib-2.0.patch
"
