# Contributor: Milan P. Stanić <mps@arvanta.net>
# Maintainer: Milan P. Stanić <mps@arvanta.net>
pkgname=ax25-apps
pkgver=2.0.0
pkgrel=0
pkgdesc="programs for the amateur radio (hamradio) protocol AX.25"
url="https://github.com/ve7fet/linuxax25"
arch="all"
license="GPL-2.0-or-later"
makedepends="autoconf
	automake
	libtool
	libax25-dev
	ncurses-dev
	linux-headers
	"
options="!check" # no tests
subpackages="$pkgname-doc"
source="https://github.com/ve7fet/linuxax25/archive/refs/tags/ax25apps-$pkgver.tar.gz
	add-include-for-call.h.patch
	fix-ax25ipd-io.c.patch
	fix-include-ncurses.patch
	"
builddir="$srcdir/"linuxax25-ax25apps-$pkgver/ax25apps

prepare() {
	default_prepare
	./autogen.sh
}

build() {
	export CFLAGS="$CFLAGS -fpermissive"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--sbindir=/usr/sbin \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
73e2b65c6d094a0b950e33d650788720461a238dcdd6368b67b151ce3d43e6f27002eb14190eb2d0feb6a16b506a64bde15ea6c4793f5b7d251e38b20ae5ba07  ax25apps-2.0.0.tar.gz
68c9d9ba887596acc03bed1f9b40351b4983fa9c49feeed829e8b46b556fa467fe58d7433e6788e7b949f4e27832f5435174124f598e924b66d7b110de75357b  add-include-for-call.h.patch
eb1794bf7f42a3a57e697250d96917b05501c6147d62afaed157662f908b77d440bbc013ef8b8905241be37a3c1e4cb8d5c8095f268271c7c926d9d40b7038ae  fix-ax25ipd-io.c.patch
1880ee2e461e17e91fae1af104328c6d78feb66f137283fb77f5644e50512cf7c7d9a3587e29709adfaa1b7fa78571c8208558cf44c9061bf07ea8fe7a9e83e2  fix-include-ncurses.patch
"
