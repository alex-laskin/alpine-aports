# Contributor: Cowington Post <cowingtonpost@gmail.com>
maintainer="Matthias Ahouansou <matthias@ahouansou.cz>"
pkgname=youtube-tui
pkgver=0.9.3
pkgrel=0
pkgdesc="Aesthetically pleasing YouTube TUI written in Rust"
url="https://tui.siri.ws/youtube/"
arch="all !loongarch64" # https://github.com/bytecodealliance/rustix/issues/1496
license="GPL-3.0-or-later"
depends="yt-dlp"
makedepends="
	cargo-auditable
	clang-libclang
	libsixel-dev
	mpv-dev
	"
source="
	https://github.com/Siriusmart/youtube-tui/archive/v$pkgver/youtube-tui-$pkgver.tar.gz
	enable-bindgen.patch
	"
options="!check" # no tests

prepare() {
	default_prepare

	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

package() {
	install -Dm755 target/release/youtube-tui -t "$pkgdir"/usr/bin
}

sha512sums="
1a330224047f1c59b39a58fd7d9d8f9653c3abd62d8f502316f280ddcb03f8089b6bb9d29160d8b79b264555584c1e5dba62ad754244afc548892b6387b16d3c  youtube-tui-0.9.3.tar.gz
4ac696d17a01449c8bfb5cbce857220d9b830e038da4f79dd5747ab9f3814c885a56b9087adae84f63f2a1895030450bd307c84aadd9ddd4d039b15b18b9c121  enable-bindgen.patch
"
