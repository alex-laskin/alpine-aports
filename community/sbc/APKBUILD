# Contributor: Carlo Landmeter <clandmeter@alpinelinux.org>
# Maintainer: Mark Riedesel <mark@klowner.com>
pkgname=sbc
pkgver=2.1
pkgrel=0
pkgdesc="Bluetooth Subband Codec (SBC) library"
url="https://www.bluez.org/"
arch="all"
options="!check"  # No tests.
license="GPL-2.0-or-later AND LGPL-2.1-or-later"
depends_dev="libsndfile-dev"
makedepends="$depends_dev linux-headers"
subpackages="$pkgname-dev $pkgname-utils"
source="https://www.kernel.org/pub/linux/bluetooth/sbc-$pkgver.tar.xz
	gcc15.patch
	"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--localstatedir=/var \
		--disable-static
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

utils() {
	pkgdesc="$pkgdesc (utilities)"

	amove usr/bin
}

sha512sums="
c7c1f624254de930c05de92233b85c95a0d3fb00a983b9f363df48ac8389655a7023a89ade92c7879f8f1e4d264c680aeb1a712c5f298bd6cb8ceecf82aceadd  sbc-2.1.tar.xz
c40cc0b9cc6121017da7029ee21a47bc4d05a6efec9f5feab1a6949fc27ea66355d14816dff3b99245b4fc6e09d502df71855406c62e5f68d42c0aee34d72980  gcc15.patch
"
