# Contributor: Milan P. Stanić <mps@arvanta.net>
# Maintainer: Milan P. Stanić <mps@arvanta.net>
pkgname=ax25-tools
pkgver=1.1.0
pkgrel=0
pkgdesc="tools for set and configure hamradio ports that use AX.25 Net/ROM or ROSE"
url="https://github.com/ve7fet/linuxax25"
arch="all"
license="GPL-2.0-or-later"
makedepends="autoconf
	automake
	libtool
	libax25-dev
	linux-headers
	zlib-dev
	"
options="!check" # no tests
subpackages="$pkgname-doc"
source="https://github.com/ve7fet/linuxax25/archive/refs/tags/ax25tools-$pkgver.tar.gz
	disable-ttylinkd.patch
	disable-dmascc.patch
	"
builddir="$srcdir/"linuxax25-ax25tools-1.1.0/ax25tools

prepare() {
	default_prepare
	./autogen.sh
}

build() {
	export CFLAGS="$CFLAGS -fpermissive"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
e8ea3440da0306d2535139b0c6273c1aff17fdd9360bed7311b54672ebecfed9f007f61cba5e67ff4f2cbb5c3db69be16324ac1d3d5eac4699718082246f18dc  ax25tools-1.1.0.tar.gz
3cd0a4284fe74f2150caa79fd74c009bb146fbab22f8f4c1af1090a3c88ecbaef5dd9208240e39f7c211a6815885f5b31b55cc60bb24b65cc8c0edca53044f51  disable-ttylinkd.patch
e056834c712c007abcebbadddee545f9410c184d871eb5a31fcb8ec55e6e4bd28a33a3485e8bb6a944a0bbc7659febeac5c334f96144782579b80d8d9e768301  disable-dmascc.patch
"
