# Contributor: ScrumpyJack <scrumpyjack@st.ilet.to>
# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=darkstat
pkgver=3.0.722
pkgrel=0
pkgdesc="Network traffic analyzer with reports served over HTTP"
url="https://unix4lyfe.org/darkstat/"
arch="all"
license="GPL-2.0-only"
makedepends="
	autoconf
	automake
	libpcap-dev
	zlib-dev
	"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/emikulic/darkstat/archive/refs/tags/$pkgver.tar.gz"

prepare() {
	default_prepare

	autoreconf -vfi
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	./darkstat --version
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
510445ccb03562feec34c250bb92ff187402fc59ce2c408962e967581a1d9767fa8f5eb0e51c7ab086b3b57d9886e5a2a2a6f0e01a30d1dbdd49657005c92732  darkstat-3.0.722.tar.gz
"
