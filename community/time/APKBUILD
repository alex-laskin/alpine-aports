# Contributor: Sascha Paunovic <azarus@posteo.net>
# Maintainer: Sascha Paunovic <azarus@posteo.net>
pkgname=time
pkgver=1.9
pkgrel=1
pkgdesc="utility to measure execution time"
url="https://www.gnu.org/software/time/"
# x86: FAIL: tests/time-max-rss.sh
arch="all !x86"
license="GPL-3.0-only"
subpackages="$pkgname-doc"
source="https://ftp.gnu.org/gnu/time/time-$pkgver.tar.gz
	0001-Fix-signature-of-signal-handler.patch"

prepare() {
	default_prepare
	update_config_sub
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
5c6dabbbe71e9103a47b892b86bb914c1704122d4fe7dff1e2cbd28503297163118d295077d8e062b035d673a1f91c36f8a45c7383f374fd766942b32bde4406  time-1.9.tar.gz
de3f8e4b7152792830aacac8d8db7c2e469023f651eff631c08f45fb6bfcd89ef65064ad3352f2578bff09dc76db400957b9481afbecb62cb87a99d0791628c6  0001-Fix-signature-of-signal-handler.patch
"
