From 72f4ac0de54bbd18a6b4d30da8e9270b6b2fc714 Mon Sep 17 00:00:00 2001
From: Steve Kowalik <steven@wedontsleep.org>
Date: Mon, 22 Sep 2025 01:43:53 +1000
Subject: [PATCH] Stop using the event_loop fixture (#4670)

Signed-off-by: Lindsay Zhou <i@lin.moe>
---
 tests/telethon/test_helpers.py | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/tests/telethon/test_helpers.py b/tests/telethon/test_helpers.py
index 47705ca2..3dffdf66 100644
--- a/tests/telethon/test_helpers.py
+++ b/tests/telethon/test_helpers.py
@@ -39,9 +39,9 @@ def test_strip_text():
 
 class TestSyncifyAsyncContext:
     class NoopContextManager:
-        def __init__(self, loop):
+        def __init__(self):
             self.count = 0
-            self.loop = loop
+            self.loop = helpers.get_running_loop()
 
         async def __aenter__(self):
             self.count += 1
@@ -54,8 +54,8 @@ class TestSyncifyAsyncContext:
         __enter__ = helpers._sync_enter
         __exit__ = helpers._sync_exit
 
-    def test_sync_acontext(self, event_loop):
-        contm = self.NoopContextManager(event_loop)
+    def test_sync_acontext(self):
+        contm = self.NoopContextManager()
         assert contm.count == 0
 
         with contm:
@@ -64,8 +64,8 @@ class TestSyncifyAsyncContext:
         assert contm.count == 0
 
     @pytest.mark.asyncio
-    async def test_async_acontext(self, event_loop):
-        contm = self.NoopContextManager(event_loop)
+    async def test_async_acontext(self):
+        contm = self.NoopContextManager()
         assert contm.count == 0
 
         async with contm:
-- 
2.51.1

