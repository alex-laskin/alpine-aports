diff -ruN a/tests/test_astroid.py b/tests/test_astroid.py
--- a/tests/test_astroid.py	2024-11-30 01:47:20.000000000 +0000
+++ b/tests/test_astroid.py	2025-10-23 03:58:05.090000000 +0000
@@ -1,5 +1,6 @@
 # -*- coding: utf-8 -*-
 import astroid
+from astroid.manager import AstroidManager
 
 from asttokens import ASTTokens
 from asttokens.astroid_compat import astroid_node_classes
@@ -36,7 +37,7 @@
 
   @staticmethod
   def create_asttokens(source):
-    builder = astroid.builder.AstroidBuilder()
+    builder = astroid.builder.AstroidBuilder(AstroidManager())
     try:
       tree = builder.string_build(source)
     except AttributeError as e:
diff -ruN a/tests/test_mark_tokens.py b/tests/test_mark_tokens.py
--- a/tests/test_mark_tokens.py	2024-11-30 02:30:05.000000000 +0000
+++ b/tests/test_mark_tokens.py	2025-10-23 04:17:03.900000000 +0000
@@ -145,7 +145,7 @@
         exp_index += 1
     else:
       # Astroid v3 has some changes from v2
-      if self.astroid_version == 3:
+      if self.astroid_version == 3 or self.astroid_version == 4:
         exp_index += 1
     exp_tested_nodes = self.expect_tested_nodes[path][exp_index]
     self.assertEqual(tested_nodes, exp_tested_nodes)
