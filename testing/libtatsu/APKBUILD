# Contributor: Clayton Craft <clayton@craftyguy.net>
# Maintainer: Clayton Craft <clayton@craftyguy.net>
pkgname=libtatsu
pkgver=1.0.5
pkgrel=0
pkgdesc="library for handling the communication with Apple's Tatsu Signing Server (TSS)"
url="https://github.com/libimobiledevice/libtatsu"
arch="all"
license="LGPL-2.1-only"
makedepends="
	autoconf
	automake
	curl-dev
	libtool
	libplist-dev
	m4
"
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::https://github.com/libimobiledevice/libtatsu/archive/refs/tags/$pkgver.tar.gz"

prepare() {
	default_prepare
	export RELEASE_VERSION="$pkgver"
	./autogen.sh \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
}

build() {
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
ebc69b05329725ff37310917b5fd6ae9c24002a0da7ff78e33cf34814afbf4ccc3ed48ec542dd4315e6ee5f1f1112874d56bfdee8212bb2e0b663469ff5e35e0  libtatsu-1.0.5.tar.gz
"
