maintainer="Hugo Osvaldo Barrera <hugo@whynothugo.nl>"
pkgname=rocm-core
pkgver=6.4.3
pkgrel=0
pkgdesc="AMD ROCm core package (version files)"
url="https://rocm.docs.amd.com/"
arch="all"
license="MIT"
depends="libstdc++"
makedepends="cmake ninja"
source="$pkgname-$pkgver.tar.gz::https://github.com/ROCm/rocm-core/archive/refs/tags/rocm-$pkgver.tar.gz"
subpackages="$pkgname-doc $pkgname-dev"
builddir="$srcdir/$pkgname-rocm-$pkgver"
options="!check" # no tests

build() {
	cmake -B build -G Ninja -Wno-dev \
		-DCMAKE_BUILD_TYPE=None \
		-DBUILD_SHARED_LIBS=ON \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DROCM_VERSION="$pkgver"
	cmake --build build
}

package() {
	DESTDIR="$pkgdir" cmake --install build

	rm -rf "$pkgdir/usr/.info"
	install -Dm644 "$builddir/copyright" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
sha512sums="
fc690da0aa64b0dc5bb3f42256f9d4059965565104079cc41bd6d8016aded1d4b29e7885a9b5c3c2327a94eeeeaebb1f20f0188c815ce2907d840c5811373bfd  rocm-core-6.4.3.tar.gz
"
