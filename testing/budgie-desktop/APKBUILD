# Maintainer: Biswapriyo Nath <nathbappai@gmail.com>
pkgname=budgie-desktop
pkgver=10.9.2
pkgrel=0
pkgdesc="A familiar, modern desktop environment"
url="https://github.com/BuddiesOfBudgie/budgie-desktop"
arch="all"
license="GPL-2.0-only AND LGPL-2.1-only"
sonameprefix="$pkgname:"
depends="
	budgie-control-center
	budgie-screensaver
	budgie-session
	zenity
	"
makedepends="
	accountsservice-dev
	gnome-desktop-dev
	gnome-settings-daemon-dev
	gobject-introspection-dev
	gstreamer-dev
	ibus-dev
	libgee-dev
	libnotify-dev
	libpeas-dev
	libwnck3-dev
	libxfce4windowing-dev
	magpie-dev
	meson
	sassc
	vala
	"
subpackages="$pkgname-dev $pkgname-doc $pkgname-lang"
options="!check" # No tests
source="https://github.com/BuddiesOfBudgie/budgie-desktop/releases/download/v$pkgver/budgie-desktop-v$pkgver.tar.xz
	0001-Update-meson.build.patch
	0002-Adapt-to-libxfce4windowing-v4.19.7-which-includes-Wi.patch
	0003-Resolve-vala-0.56.18-compact-class-inheritance-remov.patch
	0004-Add-override-for-overlay-key-to-prevent-crash-with-m.patch
	"

build() {
	abuild-meson \
		-Dwith-gtk-doc=false \
		output .
	meson compile -C output
}

check() {
	meson test --print-errorlogs -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
e05ff298801fd9485044fdd77c1d3fec1a31181bf3b440425eec5512c2fc03653dc887fd4e1081eb4438b728219e157e38673b411822b7ae04e9b95bb7c844dd  budgie-desktop-v10.9.2.tar.xz
ecf9d36cf2c37de855a17cd875bf87142143d3d33540cec189b9c68cf37cad3decf072119571a1a0c69bfefabf48ae3e3ae0012d832d21654b64ac9f7ce15907  0001-Update-meson.build.patch
5431edf7e024c1f03fc1084ec12a77d98a93086483b464b1c1ba01532b191221f42360a3721d59a1266e75531e868c0e8c5b3447ac4d3bb282f37d81d66af8d9  0002-Adapt-to-libxfce4windowing-v4.19.7-which-includes-Wi.patch
fe5130a532c8e0850e644750a26519bef048457c1b306914c9b19dab3d180236923254a2cd1ef201333a0f9d027c3bf1dbf133597ae9e7c9892b4b33286420d8  0003-Resolve-vala-0.56.18-compact-class-inheritance-remov.patch
c15848493157bead21bd69da8da3813e21121fc74975e138cf7ef978c1107dc8c8f0a265b3ae098893999c10d222a3693f206a515eaa7e64b9ef5d0b06b3b859  0004-Add-override-for-overlay-key-to-prevent-crash-with-m.patch
"
