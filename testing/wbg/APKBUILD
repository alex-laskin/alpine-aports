# Contributor: Dmitry Zakharchenko <dmitz@disroot.org>
# Maintainer:
pkgname=wbg
pkgver=1.3.0
pkgrel=0
pkgdesc="Simple wallpaper application for Wayland compositors"
url="https://codeberg.org/dnkl/wbg"
arch="all"
license="MIT"
makedepends="meson
	libjpeg-turbo-dev
	libpng-dev
	pixman-dev
	tllist-dev
	wayland-dev
	wayland-protocols
	"
options="!check" # no test suite
source="$pkgname-$pkgver.tar.gz::https://codeberg.org/dnkl/wbg/archive/$pkgver.tar.gz"
builddir="$srcdir/$pkgname"

case "$CARCH" in
s390x)	;; # no libjxl
*)	makedepends="$makedepends libjxl-dev" ;;
esac

build() {
	abuild-meson \
		. output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
438948591e18af888f837eadbec7335fe6dc3feec821703f42c0f5c6b21475abf829be904d6949fcda7045e8c9de6de3da8f392d1b6c1c5cab43b5a7734159d0  wbg-1.3.0.tar.gz
"
