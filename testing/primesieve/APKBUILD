# Contributor: Curt Tilmes <Curt.Tilmes@nasa.gov>
# Maintainer: Curt Tilmes <Curt.Tilmes@nasa.gov>
pkgname=primesieve
pkgver=12.9
pkgrel=0
pkgdesc="Program and library for generating prime numbers"
url="http://primesieve.org"
arch="all"
license="BSD-2-Clause"
makedepends="cmake samurai"
subpackages="$pkgname-dev $pkgname-doc $pkgname-libs"
source="$pkgname-$pkgver.tar.gz::https://github.com/kimwalisch/primesieve/archive/v$pkgver.tar.gz"

build() {
	cmake -B build -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_BUILD_TYPE=RelWithDebInfo \
		-DBUILD_TESTS=ON
	cmake --build build
}

check() {
	cd build
	ctest
}

package() {
	DESTDIR="$pkgdir" cmake --build build --target install
}

sha512sums="
80f6b0d733cc09d88c6a1fe654edb1a2200feee4a6ddbaa60c6a747e3c8f8e613545a1bb2aa0f477229d30690f15a373106c23b2238d6098f336d42e9814d045  primesieve-12.9.tar.gz
"
