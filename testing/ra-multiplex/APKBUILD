maintainer="Hugo Osvaldo Barrera <hugo@whynothugo.nl>"
pkgname=ra-multiplex
pkgver=0.2.5
pkgrel=0
pkgdesc="Share one instance of an LSP between multiple clients"
url="https://github.com/pr2502/ra-multiplex"
arch="all"
license="MIT"
makedepends="cargo-auditable"
subpackages="$pkgname-doc"
source="ra-multiplex-$pkgver.tar.gz::https://github.com/pr2502/ra-multiplex/archive/refs/tags/v$pkgver.tar.gz"
options="net" # fetch dependencies

prepare() {
	default_prepare
	cargo fetch --target="$CTARGET" --locked
}

build() {
	cargo auditable build --frozen --release
}

check() {
	cargo test --frozen
}

package() {
	install -Dm755 target/release/ra-multiplex -t "$pkgdir/usr/bin/"
	install -Dm755 LICENSE defaults.toml -t "$pkgdir/usr/share/doc/$pkgname/"
}

sha512sums="
d8fa6a99c8a7c4f89bef665f336594ec891f5622e087103a8c62ab4bd232bd4dd6132a7f509cfab6f4beec7426c5881148d32d22f9a43fe6aec85a7be15324e5  ra-multiplex-0.2.5.tar.gz
"
