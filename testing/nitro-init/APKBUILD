# Contributor: Guy Godfroy <guy.godfroy@gugod.fr>
# Maintainer: Guy Godfroy <guy.godfroy@gugod.fr>
pkgname=nitro-init
_pkgname=nitro
pkgver=0.5
pkgrel=0
pkgdesc="Tiny but flexible init system and process supervisor"
url="https://git.vuxu.org/nitro/"
arch="all"
license="0BSD"
subpackages="$pkgname-doc"
source="$_pkgname-$pkgver.tar.gz::https://git.vuxu.org/nitro/snapshot/nitro-$pkgver.tar.gz"
builddir="$srcdir/$_pkgname-$pkgver/"
checkdepends="reap ruby"

build() {
	make
}

check() {
	make check
}

package() {
	install -Dm755 nitro "$pkgdir"/usr/sbin/nitro
	install -Dm755 nitroctl "$pkgdir"/usr/bin/nitroctl
	install -Dm644 nitroctl.1 -t "$pkgdir"/usr/share/man/man1/
	install -Dm644 nitro.8 -t "$pkgdir"/usr/share/man/man8/
	install -Dm644 halt.8 -t "$pkgdir"/usr/share/man/man8/
}

sha512sums="
7d9df3f35257657a84db7680f40c5a2867fb7cdc2dfba0d34a4083805eb2a6f240d5639fcd0064ca5d8ea5934313a0f4671594b95a7bd2cfce82e82e9ac27563  nitro-0.5.tar.gz
"
