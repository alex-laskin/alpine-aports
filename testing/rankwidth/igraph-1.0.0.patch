--- a/simplerw.c
+++ b/simplerw.c
@@ -121,7 +121,7 @@
 	}
 
 	// Check for undirectedness
-	if(igraph_is_directed(&igraph) || igraph_is_simple(&igraph, &isimple) || !isimple)
+	if(igraph_is_directed(&igraph) || igraph_is_simple(&igraph, &isimple, IGRAPH_DIRECTED) || !isimple)
 	{
 		printf("Input is not a simple, undirected graph from file %s.\n", filename);
 		igraph_destroy(&igraph);
