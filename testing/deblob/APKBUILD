# Contributor: lauren n. liberda <lauren@selfisekai.rocks>
# Maintainer: lauren n. liberda <lauren@selfisekai.rocks>
pkgname=deblob
pkgver=0.12
_test_ver=0.12
pkgrel=0
pkgdesc="Remove binary executables (blobs) from a directory"
url="https://hacktivis.me/projects/deblob"
arch="aarch64 riscv64 x86_64"	# hare
license="BSD-3-Clause"
makedepends="hare hare-json"
subpackages="$pkgname-doc"
source="
	https://distfiles.hacktivis.me/releases/deblob/deblob-$pkgver.tar.gz
	https://distfiles.hacktivis.me/releases/deblob-test/deblob-test-$_test_ver.tar.gz
	"

prepare() {
	default_prepare

	rmdir test
	ln -sf ../deblob-test-$_test_ver test
}

build() {
	make
}

check() {
	make test
}

package() {
	make DESTDIR="$pkgdir" PREFIX=/usr install
}

sha512sums="
ed990dccc01085db3b82d795ce7622552d4b56a637e287b5815b1c98f3420435d3ccdc8fd0999672f6a940f048843bc8cbb1986a0a8f439de2386f4c5d5bc71b  deblob-0.12.tar.gz
3e229e2a6688153b074177a55657b92cbf60d5461a7cd9d27e41df28d64c335d03ca6d0e3007c7d25468ed396780ac6f979ff947598eabd8060744f011084d96  deblob-test-0.12.tar.gz
"
