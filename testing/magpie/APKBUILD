# Maintainer: Biswapriyo Nath <nathbappai@gmail.com>
pkgname=magpie
pkgver=0.9.4
pkgrel=0
pkgdesc="Budgie window manager"
url="https://github.com/BuddiesOfBudgie/magpie"
arch="all"
license="GPL-2.0-or-later"
makedepends="
	colord-dev
	glib-dev
	gnome-settings-daemon-dev
	graphene-dev
	gsettings-desktop-schemas-dev
	gtk+3.0-dev
	lcms2-dev
	libinput-dev
	libxcvt-dev
	libxkbfile-dev
	meson
	pipewire-dev
	startup-notification-dev
	sysprof-dev
	sysprof-static
	xkeyboard-config-dev
	"
subpackages="$pkgname-dev $pkgname-lang"
options="!check" # No tests
source="https://github.com/BuddiesOfBudgie/magpie/releases/download/v$pkgver/magpie-$pkgver.tar.xz
	0001-fix-gsettings-desktop-schemas-version.patch
	"

build() {
	abuild-meson \
		-Dsystemd=false \
		output .
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output
}

sha512sums="
db9fcd7230b89065425b546047a6b8c34cd1f1a49f4ad2ed19f59d740253a1c8a987f2b90d03da6e3fcc05a070a8f89e44d670f2f58de24270fc1b01b4e1887a  magpie-0.9.4.tar.xz
54a9e5c79b16bc51a637a47ec65cdbf420f31cd2631e2bcf4c62279f8a71eca5138448734f50706a44902a4df61bc1fe4bb96ec3510d7545d5b72527f830c2b4  0001-fix-gsettings-desktop-schemas-version.patch
"
