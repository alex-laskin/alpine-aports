# Contributor: Rdbo <rdbodev@gmail.com>
# Maintainer: Rdbo <rdbodev@gmail.com>
pkgname=arduino-cli
pkgver=1.3.1
pkgrel=1
pkgdesc="Arduino command line tool"
url="https://github.com/arduino/arduino-cli"
# loongarch64: "undefined: NFDBITS" in a dependency
# ppc64le, riscv, s390x: "platform is not available for your OS"
arch="all !loongarch64 !ppc64le !riscv64 !s390x"
license="GPL-3.0-only"
makedepends="go go-task"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/arduino/arduino-cli/archive/v$pkgver.tar.gz
	"
options="net"

build() {
	go build
}

check() {
	go-task go:test
	./arduino-cli version
}

package() {
	install -D -m 755 arduino-cli "$pkgdir"/usr/bin/arduino-cli
}

sha512sums="
250074438a8bc5f86698bbbae5565c987ba724bdc9841b469677ff763afc47180180e3a2fb6bc095a8550c60b30bd1841c0f098b24957911b67a2027e57cb55e  arduino-cli-1.3.1.tar.gz
"
