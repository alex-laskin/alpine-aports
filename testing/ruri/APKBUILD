# Maintainer: dabao1955 <dabao1955@163.com>
pkgname=ruri
pkgver=3.9.3
pkgrel=0
pkgdesc="A self-contained Linux container implementation"
url="https://github.com/RuriOSS/ruri"
arch="all"
license="MIT"
options="!check" # Upstream have test but can not run in docker enviroment.
makedepends="
	libcap-dev
	libseccomp-dev
	cmake
	samurai
	"
source="$pkgname-$pkgver.tar.gz::https://github.com/RuriOSS/ruri/archive/refs/tags/v$pkgver.tar.gz"
subpackages="$pkgname-doc"

build() {
	cmake -B build -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release

	cmake --build build
}

package() {
	install -Dm755 build/ruri -t "$pkgdir"/usr/bin/
	install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/COPYING
}

sha512sums="
6412e141fde9f13f8a3b4014a5641a59dbecbdb3732cd74698947fe985e7c96dbc37b3697a0a950f91054c35f2c742d419467fa5ad97cbb7db0b90137124784f  ruri-3.9.3.tar.gz
"
