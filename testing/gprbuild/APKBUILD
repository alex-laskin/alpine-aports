# Contributor: Ian Douglas Scott <ian@iandouglasscott.com>
# Maintainer: Ian Douglas Scott <ian@iandouglasscott.com>
pkgname=gprbuild
pkgver=25.0.0
pkgrel=0
pkgdesc="Builder for multi-language systems"
arch="all"
url="https://github.com/AdaCore/gprbuild"
license="GPL-3.0-or-later"
makedepends="bash"
depends="gcc-gnat"
source="gprbuild-$pkgver.tar.gz::https://github.com/AdaCore/gprbuild/archive/refs/tags/v$pkgver.tar.gz
	xmlada-$pkgver.tar.gz::https://github.com/AdaCore/xmlada/archive/refs/tags/v$pkgver.tar.gz
	gprconfig_kb-$pkgver.tar.gz::https://github.com/AdaCore/gprconfig_kb/archive/refs/tags/v$pkgver.tar.gz
	"
# gprbuild doesn't seem to have tests
options="!check"

build() {
	DESTDIR="$PWD/dest" ./bootstrap.sh \
		--prefix=/usr \
		--with-xmlada="$srcdir"/xmlada-$pkgver \
		--with-kb="$srcdir"/gprconfig_kb-$pkgver
}

package() {
	mkdir -p "$pkgdir"
	cp -r dest/usr "$pkgdir"
}

sha512sums="
eb2d7072194323cae90acd0c8683eeb6a806ef6ff2ed4d3496e8b94c5b63dae8a428ec428a3610b380df7e122d7a00d9e9634ef06b5369b165536c99209602ce  gprbuild-25.0.0.tar.gz
c57db78e3afd20862c3275d3d0874ada1748e98df06a76841cb3dca3686b29c7693835a591ca5789dca2d3d6ba9677c9082df94857e180e0758a5b77fafc40c0  xmlada-25.0.0.tar.gz
afc1754efdf6e3cbff9752a182cd063f83965c6a13e53930a14f806a46e3cbfb0afed8f8e11b098986227f27a1a67b45d22369adaa39a5dc1f2a8cc494f789e8  gprconfig_kb-25.0.0.tar.gz
"
