# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=argtable2
pkgver=2.13
pkgrel=0
_pkgver=${pkgver/\./-}
pkgdesc="Command-line argument parsing library"
url="https://argtable.sourceforge.io/"
arch="all"
license="LGPL-2.0-or-later"
subpackages="$pkgname-doc $pkgname-dev"
source="https://downloads.sourceforge.net/argtable/argtable$_pkgver.tar.gz
	getopt-gcc15.patch
	missing-includes.patch
	"
builddir="$srcdir/argtable$_pkgver"

prepare() {
	default_prepare
	update_config_sub
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" dist_doc_DATA="" install
}

sha512sums="
3d8303f3ba529e3241d918c0127a16402ece951efb964d14a06a3a7d29a252812ad3c44e96da28798871e9923e73a2cfe7ebc84139c1397817d632cae25c4585  argtable2-13.tar.gz
d3c11c8619ecdfcce2e9c9d65409fbf4ddb1822f75c7b8c391a56e98c8aedb67becf8b6883e61014dcd8a4b2a5d9411473afba77f7d313e28ca8a66d87d4604f  getopt-gcc15.patch
c71782782ec833e8eda3a4296a9476adddf2c102383dc9297c08a976fbf085efaea7e4df2f869a3819faba7ab99e19c43074e890b4d433253029538a104f4ded  missing-includes.patch
"
