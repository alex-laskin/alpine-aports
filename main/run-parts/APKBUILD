# Maintainer: Celeste <cielesti@protonmail.com>
maintainer="Celeste <cielesti@protonmail.com>"
pkgname=run-parts
pkgver=5.23.2
pkgrel=0
pkgdesc="run-parts from the debianutils package"
url="https://packages.qa.debian.org/d/debianutils.html"
arch="all"
license="GPL-2.0-or-later"
makedepends="autoconf automake"
subpackages="$pkgname-doc"
source="https://salsa.debian.org/debian/debianutils/-/archive/debian/$pkgver/debianutils-debian-$pkgver.tar.gz"
builddir="$srcdir/debianutils-debian-$pkgver"

prepare() {
	default_prepare

	autoreconf -fvi
}

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--bindir=/bin
	make run-parts
}

check() {
	./run-parts --version
}

package() {
	# Install binaries to /bin to overwrite busybox's run-parts version.
	install -Dvm755 run-parts -t "$pkgdir"/bin/
	install -Dvm644 run-parts.8 -t "$pkgdir"/usr/share/man/man8/
}

sha512sums="
1c4c23c3d389566ab43f0b80cfba79fbb6f2e047c73b76ad66e0a155d63d139f76fbdca051f11b9d34adcac57ca7f1dc0c8eb51196b4078b4e09d1a95edd9a4c  debianutils-debian-5.23.2.tar.gz
"
