# Contributor: Francesco Colista <fcolista@alpinelinux.org>
# Maintainer: Francesco Colista <fcolista@alpinelinux.org>
pkgname=py3-dnspython
_pyname=dnspython
pkgver=2.8.0
pkgrel=0
pkgdesc="DNS toolkit for Python3"
url="https://www.dnspython.org/"
arch="all"
license="ISC"
makedepends="
	cython
	py3-gpep517
	py3-hatchling
	py3-wheel
	python3-dev
	"
checkdepends="py3-pytest"
subpackages="$pkgname-pyc"
source="https://github.com/rthalley/dnspython/archive/v$pkgver/dnspython-$pkgver.tar.gz"
builddir="$srcdir/$_pyname-$pkgver"
options="!check" # network tests are failing on CI

replaces="py-dnspython" # Backwards compatibility
provides="py-dnspython=$pkgver-r$pkgrel" # Backwards compatibility

build() {
	gpep517 build-wheel \
		--wheel-dir .dist \
		--output-fd 3 3>&1 >&2
}

package() {
	python3 -m installer -d "$pkgdir" \
		.dist/*.whl
}

sha512sums="
982b821da024eec27ab31429aef86dd0ccb376fd565e56a9c1254c081ace00a619d2a3692a25ca48a94101a6f96f1426767ec70e55f6143a153213020ad83cf0  dnspython-2.8.0.tar.gz
"
