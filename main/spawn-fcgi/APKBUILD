# Contributor: Eivind Uggedal <eu@eju.no>
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=spawn-fcgi
pkgver=1.6.6
pkgrel=0
pkgdesc="Spawn FastCGI applications"
url="https://redmine.lighttpd.net/projects/spawn-fcgi/"
arch="all"
license="BSD-3-Clause"
makedepends="meson"
subpackages="$pkgname-doc $pkgname-openrc"
source="https://download.lighttpd.net/spawn-fcgi/releases-${pkgver%.*}.x/spawn-fcgi-$pkgver.tar.xz
	$pkgname.confd
	$pkgname.initd
	"
options="!check"

build() {
	abuild-meson \
		. output
	meson compile -C output
}

package() {
	DESTDIR="$pkgdir" meson install --no-rebuild -C output

	install -Dm755 "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
	install -Dm644 "$srcdir"/$pkgname.confd "$pkgdir"/etc/conf.d/$pkgname
}

sha512sums="
d84db80960853dfa65deaea0783d12cb1fdd5c95a6febda5ff59d9feaea119700da563e638c84a6922ea20c8f8295f26c1369144a374410cce06f4d33ade8c63  spawn-fcgi-1.6.6.tar.xz
44fdc908b868d890713b1eee8f8f5a7ff1a26d0665aa368e76587d479934bbda0a3e4ccd53953fef524103630261c40495cd58963fdea11a47e2cd0f23e1dcf6  spawn-fcgi.confd
c6b44dbdac2ac53d7c26acfa1d433dd81d12fce35e9ba0c7d1341e5da16c6453fdd65de073b22a091b425799b01f08385b3293e33f505d4c26764826e5ab9084  spawn-fcgi.initd
"
